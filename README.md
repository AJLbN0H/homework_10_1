# Виджет банковских операций

# Описание:

Мой проект это это серверная часть виджета банковских операций. Виджет имеет возможность отображать операции клиента, маскировать номер карты или счета, сортировать операции по времени.

## Установка:

Клонируйте репозиторий:
```
git clone https://github.com/AJLbN0H/homework_10_1.git
```

## Примеры работы функций:

* ```get_mask_account``` - маскировки номера карты (XXXX XX** **** XXXX);


* ```get_mask_card_number``` - маскировка номера счета (**XXXX);


* ```mask_account_card``` - совмещает в себе эти две фнукции (Тип карты XXXX XX** **** XXXX или Счет **XXXX);


* ```get_date``` - возврощает строку с датой операции;


* ```filter_by_state``` - возвращает новый список словарей, содержащий только те словари, у которых ключ state соответствует указанному значению;


* ```sort_by_date``` - возвращает список отсортированный по дате;


* ```filter_by_currency``` - возвращает итератор, который поочередно выдает транзакции, где валюта операции соответствует заданной;


* ```transaction_descriptions``` - возвращает описание каждой операции по очереди;


* ```card_number_generator``` - генерирует номер карты в заданном диапазоне от 0000 0000 0000 0001 до 9999 9999 9999 9999;


* ```log``` - функция-декоратор, автоматически регистрирует детали выполнения функций, такие как время вызова, имя функции, передаваемые аргументы, результат выполнения и информация об ошибках;


* ```json_file``` - принимает на вход путь до JSON-файла и возвращает список словарей с данными о финансовых транзакциях;


* ```transaction_amount``` - функция которая принимает на вход транзакцию и возвращает сумму транзакции (amount) в рублях, тип данных — float Если транзакция была в USD или EUR, происходит обращение к внешнему API для получения текущего курса валют и конвертации суммы операции в рубли;


* ```convert_usd_and_eur_in_rub``` - функция конвератации из USD или EUR в RUB;


* ```csv_file``` - принимает на вход путь до csv-файла и возвращает список словарей с данными о финансовых транзакциях;


* ```xlsx_file``` - принимает на вход путь до xlsx-файла и возвращает список словарей с данными о финансовых транзакциях;


* ```search_by_list_description``` - функция, которая принимает список словарей с данными о банковских операциях и строку поиска, а возвращает список словарей с операциями, у которых в описании есть данная строка;


* ```counting_transaction_categories``` - функция, которая принимает список словарей с данными о банковских операциях и список категорий операций, а возвращает словарь, в котором ключи — это названия категорий, а значения — это количество операций в каждой категории;

## Использование:

1. Откройте репозиторий


2. Перейдите в пакет ```src``` ознакомтесь с примерами работы функций и выберете подходящую для вас.


3. Откройте файл с нужной вам функцией


4. Вставте свои данные


5. Введите свои данные и получите результат

## Были проведены тесты функций:

### Модуль masks
* ```get_mask_card_number```:
  * Тестирование правильности маскирования номера карты.
  * Проверка работы функции на различных входных форматах номеров карт, включая граничные случаи и нестандартные длины номеров.
  * Проверка, что функция корректно обрабатывает входные строки, где отсутствует номер карты.
* ```get_mask_account```:
  * Тестирование правильности маскирования номера счета.
  * Проверка работы функции с различными форматами и длинами номеров счетов.
  * Проверка, что функция корректно обрабатывает входные данные, где номер счета меньше ожидаемой длины.

### Модуль widget
* ```mask_account_card```:
  * Тесты для проверки, что функция корректно распознает и применяет нужный тип маскировки в зависимости от типа входных данных (карта или счет).
  * Параметризованные тесты с разными типами карт и счетов для проверки универсальности функции.
  * Тестирование функции на обработку некорректных входных данных и проверка ее устойчивости к ошибкам.
* ```get_date```:
  * Тестирование правильности преобразования даты.
  * Проверка работы функции на различных входных форматах даты, включая граничные случаи и нестандартные строки с датами.
  * Проверка, что функция корректно обрабатывает входные строки, где отсутствует дата.

### Модуль processing
* ```filter_by_state```:
  * Тестирование фильтрации списка словарей по заданному статусу ```state```.
  * Проверка работы функции при отсутствии словарей с указанным статусом ```state``` в списке.
  * Параметризация тестов для различных возможных значений статуса ```state```.
* ```sort_by_date```:
  * Тестирование сортировки списка словарей по датам в порядке убывания и возрастания.
  * Проверка корректности сортировки при одинаковых датах.
  * Тесты на работу функции с некорректными или нестандартными форматами дат.

### Модуль generators
* ```transaction_descriptions```:
  * Проверка, что функция корректно фильтрует транзакции по заданной валюте.
  * Проверка, что функция правильно обрабатывает случаи, когда транзакции в заданной валюте отсутствуют.
  * Убедился, что генератор не завершается ошибкой при обработке пустого списка или списка без соответствующих валютных операций.
* ```transaction_descriptions```:
  * Проверил, что функция возвращает корректные описания для каждой транзакции.
  * Тестировал работу функции с различным количеством входных транзакций, включая пустой список.
* ```card_number_generator```:
  * Написаны тесты, которые проверяют, что генератор выдает правильные номера карт в заданном диапазоне.
  * Проверил корректность форматирования номеров карт.
  * Убедился, что генератор корректно обрабатывает крайние значения диапазона и правильно завершает генерацию.

### Модуль decorators
* ```log```:
  * Написаны тесты, проверяющие корректность вывода информации.
  * Проверил, что функция правильно записывает в файл и выводит в консоль информацию с различными входными данными.

### Модуль utils
* ```json_file```:
  * Тестирование чтение json-файлов и вывод корректного списка.
  * Протестирована в различных случаях.
* ```transaction_amount```:
  * Функция протестирована в различных случаях входных данных(RUB, EUR, USD).
  * Если на вход поступает транзакция с USD или EUR то функция обращается к внешнему сервису.

### Модуль external_api
* ```convert_usd_and_eur_in_rub```:
  * Правильно конвертирует транзакцию EUR/USD в рубли.

### Модуль utils_csv_and_xlsx
* ```csv_file```:
  * Верно обрабатывает различные входные пути и данные.
* ```xlsx_file```:
  * Были выполнены те же тесты, что и для csv_file.

### Модуль search_by_transactions
* ```search_by_list_description```:
  * Работоспособность подтверждена.
* ```counting_transaction_categories```:
  * Работает.
  
### С тестами можно ознакомиться в пакете ```tests```, а с покрытием тестами в директории ```htmlcov``` -> ```index.html```
* ```xlsx_file```:
  * Были выполнены те же тесты, что и для csv_file.

### С тестами можно ознакомиться в пакете ```tests```, а с покрытием тестами в директории ```htmlcov``` -> ```index.html```
